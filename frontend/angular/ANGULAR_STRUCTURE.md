# Angular Frontend Structure

This Angular application has been structured to match the Vue.js and React implementations in the AWS Application Accelerator Framework.

## ðŸ“ Project Structure

```
frontend/angular/src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ loading/
â”‚   â”‚   â”‚   â””â”€â”€ loading.component.ts          # Loading spinner component
â”‚   â”‚   â””â”€â”€ navbar/
â”‚   â”‚       â””â”€â”€ navbar.component.ts           # Sidebar navigation component
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â””â”€â”€ dashboard.component.ts        # Dashboard with stats and recent activity
â”‚   â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â”‚   â””â”€â”€ login.component.ts            # Login page with Amplify Authenticator
â”‚   â”‚   â”œâ”€â”€ posts/
â”‚   â”‚   â”‚   â””â”€â”€ posts.component.ts            # Posts management page
â”‚   â”‚   â””â”€â”€ users/
â”‚   â”‚       â””â”€â”€ users.component.ts            # Users management page
â”‚   â”œâ”€â”€ graphql/
â”‚   â”‚   â”œâ”€â”€ client.ts                         # Apollo GraphQL client configuration
â”‚   â”‚   â”œâ”€â”€ queries.ts                        # GraphQL queries
â”‚   â”‚   â”œâ”€â”€ mutations.ts                      # GraphQL mutations
â”‚   â”‚   â””â”€â”€ subscriptions.ts                  # GraphQL subscriptions
â”‚   â”œâ”€â”€ app.component.ts                      # Main app component with layout logic
â”‚   â”œâ”€â”€ app.html                              # App template with conditional navbar
â”‚   â”œâ”€â”€ app.routes.ts                         # Route configuration with auth guards
â”‚   â””â”€â”€ app.scss                              # App-specific styles
â”œâ”€â”€ aws-exports.js                            # Generated AWS configuration
â”œâ”€â”€ aws-exports.ts                            # TypeScript AWS configuration
â”œâ”€â”€ main.ts                                   # App bootstrap with Amplify configuration
â””â”€â”€ styles.scss                               # Global styles with Tailwind utilities
```

## ðŸŽ¯ Key Features

### **Layout & Navigation**
- **Responsive sidebar navigation** that matches Vue/React implementations
- **Conditional navbar display** (hidden on login page)
- **Mobile-responsive design** with proper breakpoints
- **Loading states** with spinner animations

### **Routing & Authentication**
- **Lazy-loaded routes** for optimal performance
- **Authentication guards** using Amplify v6 API
- **Route-based access control** protecting authenticated pages
- **Automatic redirect** to login for unauthenticated users

### **Component Structure**
- **Standalone components** using Angular 17+ architecture
- **Consistent styling** with Tailwind CSS utilities
- **Reusable UI patterns** matching Vue/React implementations
- **TypeScript interfaces** for type safety

### **GraphQL Integration**
- **Apollo Client** configuration with authentication
- **Error handling** with automatic sign-out on auth errors
- **Query/Mutation/Subscription** organization
- **Cache management** with proper merge policies

## ðŸ”§ Configuration

### **Amplify Configuration**
The app automatically loads AWS configuration from `aws-exports.js` (generated by CDK) with fallback to environment variables:

```typescript
// main.ts
async function initializeApp() {
  let awsExports;
  try {
    awsExports = (await import('./aws-exports.js')).default;
  } catch (error) {
    // Fallback configuration
    awsExports = { /* fallback config */ };
  }
  
  Amplify.configure(awsExports);
  // Bootstrap app...
}
```

### **Authentication Guards**
Routes are protected using functional guards:

```typescript
// app.routes.ts
const authGuard = async () => {
  const router = inject(Router);
  try {
    const session = await fetchAuthSession();
    return session.tokens?.accessToken ? true : false;
  } catch (error) {
    router.navigate(['/login']);
    return false;
  }
};
```

### **GraphQL Client**
Apollo Client is configured with authentication and error handling:

```typescript
// graphql/client.ts
const authLink = setContext(async (_, { headers }) => {
  const session = await fetchAuthSession();
  const token = session.tokens?.idToken?.toString();
  
  return {
    headers: {
      ...headers,
      authorization: token ? `Bearer ${token}` : '',
    },
  };
});
```

## ðŸŽ¨ Styling

### **Tailwind CSS Integration**
- **Utility-first approach** matching Vue/React implementations
- **Custom component classes** for consistent styling
- **Responsive design** with mobile-first approach
- **Dark mode support** (configurable)

### **Component Styles**
```scss
// styles.scss
@layer components {
  .btn-primary {
    @apply bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200;
  }
  
  .card {
    @apply bg-white rounded-lg shadow-md p-6 border border-gray-200;
  }
}
```

## ðŸš€ Development

### **Running the Application**
```bash
# Install dependencies
npm install

# Start development server
ng serve

# Build for production
ng build
```

### **Key Commands**
```bash
# Generate new component
ng generate component views/new-page --standalone

# Generate new service
ng generate service services/new-service

# Run tests
ng test

# Run e2e tests
ng e2e
```

## ðŸ“Š Component Details

### **App Component**
- **Loading state management** with 1-second delay
- **Mobile detection** with window resize listener
- **Login page detection** for conditional navbar
- **Route change monitoring** for UI updates

### **Navbar Component**
- **User information display** with initials avatar
- **Active route highlighting** using `routerLinkActive`
- **Sign-out functionality** with Amplify integration
- **Responsive design** with proper spacing

### **Dashboard Component**
- **Statistics cards** with icons and metrics
- **Recent activity sections** for users and posts
- **Mock data integration** (ready for GraphQL)
- **Responsive grid layout**

### **Users Component**
- **Data table** with user information
- **Loading states** with spinner
- **Error handling** with user-friendly messages
- **Refresh functionality**

### **Posts Component**
- **Card-based layout** for post display
- **Status badges** (Published/Draft)
- **Author information** with creation dates
- **Empty state** with call-to-action

### **Login Component**
- **Amplify Authenticator integration** (placeholder)
- **Automatic redirect** for authenticated users
- **Consistent styling** with other frameworks
- **Form field customization** support

## ðŸ”„ Data Flow

### **Authentication Flow**
1. User accesses protected route
2. Auth guard checks for valid session
3. Redirect to login if unauthenticated
4. Amplify handles authentication
5. Redirect to dashboard on success

### **GraphQL Flow**
1. Component requests data via service
2. Apollo Client adds authentication headers
3. GraphQL query sent to AppSync
4. Response cached and returned
5. Component updates with data

### **Error Handling**
1. GraphQL errors caught by error link
2. Authentication errors trigger sign-out
3. Network errors logged and handled
4. User-friendly error messages displayed

## ðŸŽ¯ Next Steps

### **Integration Tasks**
- [ ] Replace mock data with actual GraphQL queries
- [ ] Implement Amplify UI Authenticator component
- [ ] Add form validation and error handling
- [ ] Implement real-time subscriptions
- [ ] Add loading states for all operations

### **Enhancement Opportunities**
- [ ] Add unit tests for all components
- [ ] Implement e2e tests with Cypress
- [ ] Add accessibility improvements
- [ ] Implement dark mode toggle
- [ ] Add internationalization support

This Angular implementation provides feature parity with the Vue.js and React versions while following Angular best practices and maintaining consistency across all three frontend frameworks.
