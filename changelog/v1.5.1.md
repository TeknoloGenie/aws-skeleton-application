# Version 1.5.1 - DynamoDB Data Source Configuration Fix

**Release Date:** 2025-08-17  
**Type:** Patch (Bug Fix)

## üêõ Bug Fixes

### Fixed DynamoDB "Requested resource not found" Errors

**Issue:** Users experienced "Requested resource not found" DynamoDB errors when loading posts, particularly on page refresh. The errors occurred when AppSync relationship resolvers tried to access DynamoDB tables.

**Root Cause:** 
- AppSync data sources were pointing to non-existent DynamoDB tables with incorrect naming
- UserRelationshipDataSource pointed to `SkeletonApp-dev-UserTable` (doesn't exist)
- PostRelationshipDataSource pointed to `SkeletonApp-dev-PostTable` (doesn't exist)
- IAM service roles had permissions for the wrong table ARNs

**Resolution:**
1. **Data Source Configuration Fixed:**
   - UserRelationshipDataSource: `SkeletonApp-dev-UserTable` ‚Üí `SkeletonApp-dev-User` ‚úÖ
   - PostRelationshipDataSource: `SkeletonApp-dev-PostTable` ‚Üí `SkeletonApp-dev-Post` ‚úÖ

2. **IAM Permissions Updated:**
   - Updated UserRelationshipDataSource service role policy to grant access to `SkeletonApp-dev-User` table
   - Updated PostRelationshipDataSource service role policy to grant access to `SkeletonApp-dev-Post` table
   - Added permissions for table indexes (`/index/*`)

**Impact:**
- ‚úÖ Post.user relationship queries now work correctly
- ‚úÖ Page refresh no longer causes DynamoDB errors
- ‚úÖ All relationship resolvers can access their target tables
- ‚úÖ Improved application reliability and user experience

## üß™ Testing

- Added comprehensive unit test: `test/appsync-datasource-config.test.ts`
- Test validates data source naming patterns and prevents regression
- Ensures relationship data sources point to existing tables
- Validates IAM policy ARN patterns are correct

## üìã Technical Details

**Files Modified:**
- AppSync Data Sources: UserRelationshipDataSource, PostRelationshipDataSource
- IAM Policies: Service role policies for relationship data sources
- Tests: Added `appsync-datasource-config.test.ts`

**AWS Resources Updated:**
- AppSync API: `n7twxltkxzehtkhm7gygjrh5je`
- DynamoDB Tables: `SkeletonApp-dev-User`, `SkeletonApp-dev-Post`
- IAM Roles: UserRelationshipDataSource and PostRelationshipDataSource service roles

## üîÑ Migration Notes

This is a configuration-only fix that doesn't require any code changes or data migration. The fix was applied directly to the AWS infrastructure and is immediately effective.

## üéØ Validation

To verify the fix is working:
1. Navigate to the posts page in your application
2. Refresh the page multiple times
3. Confirm no "Requested resource not found" errors appear
4. Verify post data loads with associated user information
5. Run the test suite: `npm test -- test/appsync-datasource-config.test.ts`

---

**Previous Version:** 1.5.0  
**Current Version:** 1.5.1  
**Next Version:** 1.5.2 (planned)
